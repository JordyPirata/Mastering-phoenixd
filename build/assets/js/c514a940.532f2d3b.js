"use strict";(self.webpackChunktest=self.webpackChunktest||[]).push([[822],{8443:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"API","title":"API reference","description":"Below is a reference for the phoenixd API, up-to-date for version 0.6.0.","source":"@site/docs/4-API.md","sourceDirName":".","slug":"/API","permalink":"/API","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Uninstall phoenixd","permalink":"/Uninstall"}}');var t=a(4848),d=a(8453);const c={},i="API reference",r={},l=[{value:"Security",id:"security",level:2},{value:"Create Bolt11 invoice",id:"create-bolt11-invoice",level:2},{value:"Create Bolt12 offer",id:"create-bolt12-offer",level:2},{value:"Get Lightning address",id:"get-lightning-address",level:2},{value:"Pay Bolt11 invoice",id:"pay-bolt11-invoice",level:2},{value:"Pay Lightning address",id:"pay-lightning-address",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"api-reference",children:"API reference"})}),"\n",(0,t.jsxs)(n.p,{children:["Below is a reference for the ",(0,t.jsx)(n.code,{children:"phoenixd"})," API, up-to-date for version ",(0,t.jsx)(n.code,{children:"0.6.0"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,t.jsx)(n.p,{children:"\u26a0\ufe0f This API must be secured. It gives access to your funds. You are responsible for securing it. Specifically, this API should not be accessible from the outside world."}),"\n",(0,t.jsxs)(n.p,{children:["The API uses a Basic authentication scheme. Passwords are generated on first start (see ",(0,t.jsx)(n.code,{children:"~/.phoenix/phoenix.conf"}),")."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Primary password"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"http-password"})," is the primary password and gives access to all the API endpoints."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Secondary password"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"http-password-limited-access"})," is less sensitive than the primary password, but it must still not be shared, as other attacks are possible, e.g. resource exhaustion by creating millions of invoices, etc..."]}),"\n",(0,t.jsxs)(n.p,{children:["The following enpoints are not available with this secondary password: ",(0,t.jsx)(n.code,{children:"payinvoice"}),", ",(0,t.jsx)(n.code,{children:"payoffer"}),", ",(0,t.jsx)(n.code,{children:"paylnaddress"}),", ",(0,t.jsx)(n.code,{children:"lnurlpay"}),", ",(0,t.jsx)(n.code,{children:"lnurlauth"}),", ",(0,t.jsx)(n.code,{children:"sendtoaddress"}),", ",(0,t.jsx)(n.code,{children:"closechannel"}),", ",(0,t.jsx)(n.code,{children:"export"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"create-bolt11-invoice",children:"Create Bolt11 invoice"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"POST /createinvoice"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:"Creates a Bolt11 invoice with a description."}),"\n",(0,t.jsx)(n.p,{children:"A Bolt11 invoice is a non-reusable, expirable payment request for Lightning, well suited for a retail payment flow. It can only be paid once."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"description"})," the description of the invoice (max. 128 characters).","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["or instead ",(0,t.jsx)(n.code,{children:"descriptionHash"})," sha256 hash of a description."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"amountSat"})," (optional) the amount requested by the invoice, in satoshi. If not set, the invoice can be paid by any amount."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"expirySeconds"})," (optional) the invoice expiry in seconds, by default 3600 (1 hour)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"externalId"})," (optional) a custom identifier. Use that to link the invoice to an external system."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"webhookUrl"})," (optional) a webhook url that will be notified when this specific payment has been received. This notification is done in addition to the [#webhook](normal webhooks) defined in the configuration."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code example"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/createinvoice \\\n    -u :<phoenixd_api_password> \\\n    -d description='my first invoice' \\\n    -d amountSat=100 \\\n    -d externalId=foobar \\\n    -d webhookUrl='https://my.webhook.net'\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "amountSat": 100,\n  "paymentHash": "f419207c9edde9021ebfb6bd0df6bd0a6606ecaf935357cc2f362e30835c3765",\n  "serialized": "lntb1u1pjlsjnqpp57svjqly7mh5sy84lk67sma4apfnqdm90jdf40np0xchrpq6uxajscqpjsp592kp0fs2ssgpq9h54tsfaj5w34287v8fezgaw6cr56f076c05glq9q7sqqqqqqqqqqqqqqqqqqqsqqqqqysgqdq6d4ujqenfwfehggrfdemx76trv5mqz9grzjqwfn3p9278ttzzpe0e00uhyxhned3j5d9acqak5emwfpflp8z2cnflcyamh4dcuhwqqqqqlgqqqqqeqqjqnjpjvnv0p3wvwc6vhzkkgm8kl9r837x4p9qupk5ln5tqlm7prrlsy5xd8cf5agae64f53dvm9el0z5hvgcnta4stgmrg7zwfah0nqrqph4ts8l"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"create-bolt12-offer",children:"Create Bolt12 offer"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"POST /createoffer"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:"Creates a Bolt12 offer with an optional description and amount."}),"\n",(0,t.jsx)(n.p,{children:"An offer is a static and reusable payment request that does not expire. It can be paid many times. It's well suited for donations or tips."}),"\n",(0,t.jsxs)(n.p,{children:["Note: a ",(0,t.jsx)(n.code,{children:"getoffer"})," call is also available but it is deprecated. This ",(0,t.jsx)(n.code,{children:"getoffer"})," endpoint returns an offer, but always the same one. ",(0,t.jsx)(n.code,{children:"createoffer"})," should be used instead."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"description (optional) the description of the offer (max. 128 characters)."}),"\n",(0,t.jsx)(n.li,{children:"amountSat (optional) the amount requested by the offer, in satoshi. If not set, the offer can be paid by any amount."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code example"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/createoffer \\\n    -u :<phoenixd_api_password> \\\n    -d description='an offer for Pierre' \\\n    -d amountSat=100\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"lno1qgsyxjtl6luzd9t3pr62xr7eemp6awnejusgf6gw45q75vcfqqqqqqqgqvqcdgq2zdskugr0venx2u3qvehhygzsd9jhyun9zrhq8yecsj40r443pquhuhh7tjrteukce2xj7uqwm2vahys5lsn39vf5q2fyfxsw6xn824393en87nre87xcectkgcj85trcu5hn9r9703645qsrxtcq785whraquh5atw89w5scg707fz23405ygk7jn9uek3tkmvdqqvc8yz8xm2yme6hjx3x02csmq6pfzaejqr3kzg7u8am96txu95z8am8zgvfvfcnzk27ylwk43ut48xv2vrkhqtj3wes32glw5ft5h7f4p8ytwey4cqjsks55zcmr3hka0p8e50thjqpjytmt5wsa4ylhavdmewv7jmj2ppy9daujfmfvpmnw9cf75cymjffzh2nafn883vsqr3a8u2l797mayh3p\n"})}),"\n",(0,t.jsx)(n.h2,{id:"get-lightning-address",children:"Get Lightning address"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"GET /getlnaddress"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:"Gets a BIP-353 Lightning address from the LSP. Only works if you have a channel."}),"\n",(0,t.jsxs)(n.p,{children:["Note you can also use third-party services or self-host the address.\n",(0,t.jsx)(n.strong,{children:"Code example"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl http://localhost:9740/getlnaddress \\\n    -u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u20bfpurplecrocus03@phoenixwallet.me\n"})}),"\n",(0,t.jsx)(n.h2,{id:"pay-bolt11-invoice",children:"Pay Bolt11 invoice"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"POST /payinvoice"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:"Pays a BOLT11 Lightning invoice. A 0.4% fee applies. Response includes the internal paymentId for that payment."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Parameters"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"amountSat"})," optional amount in satoshi. If unset, will pay the amount requested in the invoice"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"invoice"})," BOLT11 invoice"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code example"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/payinvoice \\\n    -u :<phoenixd_api_password> \\\n    -d amountSat=1 \\\n    -d invoice=lntb10n1pjl3pmlpp5jkrt9qvl83knc0sg0xztjlw0fd6t40725hdyh3pq0arudswvw8sqcqpjsp5zsc4phrg5v6nl84wkd9vuqzlva22j2qwll28v37y9jgjs7ap2dxs9q7sqqqqqqqqqqqqqqqqqqqsqqqqqysgqdq4xysyymr0vd4kzcmrd9hx7mqz9grzjqwfn3p9278ttzzpe0e00uhyxhned3j5d9acqak5emwfpflp8z2cnfl6h8msfh3505gqqqqlgqqqqqeqqjq6f8fhkj0uma7m68arjj3m5gn339xh3m5fn4qj9r9xu550686m0y8kadeahnn02ucmyq9nfsj0vl5vhpl6g7h6fs8xa8wu2qr3yc6a2gp4h32vu\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "recipientAmountSat": 1,\n    "routingFeeSat": 4,\n    "paymentId": "961d413c-91ca-4f3d-9d91-760a08405901",\n    "paymentHash": "9586b2819f3c6d3c3e087984b97dcf4b74babfcaa5da4bc4207f47c6c1cc71e0",\n    "paymentPreimage": "6a3e65d9a05113864c9c27e430cc99751359ccbfa8fd5869aea46405df657986"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Pay Bolt12 offer"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"POST /payoffer"}),"\n",(0,t.jsx)(n.strong,{children:"Description"})]}),"\n",(0,t.jsxs)(n.p,{children:["Pays a BOLT12 Lightning offer. A 0.4% fee applies. Response includes the internal paymentId for that payment.\n",(0,t.jsx)(n.strong,{children:"Parameters"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"amountSat"})," optional amount in satoshi. If unset, will pay the amount requested in the invoice"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"offer"})," BOLT12 offer"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"message"})," an optional message for the recipient"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code example"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/payoffer \\\n    -u :<phoenixd_api_password> \\\n    -d amountSat=123 \\\n    -d offer=lno1qgsyxjtl6luzd9t3pr62xr...9ry9zqagt0ktn4wwvqg52v9ss9ls22sqyqqestzp2l6decpn87pq96udsvx \\\n    -d message='\ud83d\udc4b Hello!'\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "recipientAmountSat": 123,\n  "routingFeeSat": 4,\n  "paymentId": "889c26f1-3028-4fae-9bd9-130c6e93542f",\n  "paymentHash": "54ed3cadcd102a475f7e7bd25a89223b46514df72c01c4fa9880aed7a795eb16",\n  "paymentPreimage": "09820bd4915f91ab21377879d5182c1bcf35feabdda5933266a99b4126f32b9b"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"pay-lightning-address",children:"Pay Lightning address"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Endpoint"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"POST /paylnaddress"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Description"})}),"\n",(0,t.jsx)(n.p,{children:"Pays an email-like Lightning address, either based on BIP-353 or LNURL. A 0.4% fee applies. Response includes the internal paymentId for that payment.\nParameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"amountSat"})," optional amount in satoshi. If unset, will pay the amount requested in the invoice"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"address"})," BOLT11 invoice"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"message"})," an optional message for the recipient"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Code example"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/paylnaddress \\\n    -u :<phoenixd_api_password> \\\n    -d amountSat=123 \\\n    -d address=flashybugle70@testnet.phoenixwallet.me \\\n    -d message='\ud83d\udc4b Hello!'\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Response"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "recipientAmountSat": 123,\n  "routingFeeSat": 4,\n  "paymentId": "a9b1b8f8-bfdb-4299-9979-18e616bc9259",\n  "paymentHash": "bfa554308df2f397cd23ba724316660aaa398b2044b3e4e15ed79b8f2b278679",\n  "paymentPreimage": "dc4a8e059599d464d9ea10dfc0ffe6ad23a898c897c42dad973716e85c26a920"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Pay on-chain\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /sendtoaddress\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Sends part of your current balance to a Bitcoin address. The spliced channel is not closed and remains active. Returns the transaction id if the splice was successful.\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"amountSat amount in satoshi\naddress Bitcoin address where funds will be sent\nfeerateSatByte fee rate in satoshi per vbyte"}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/sendtoaddress \\\n  -u :<phoenixd_api_password> \\\n  -d amountSat=100000 \\\n  -d address=tb1qwnp38xc5qh35ch9l5p6a3r7kwupj9rw5a4jn3y \\\n  -d feerateSatByte=12\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"05a28b4972560655eeedaaf72c4d8e9f1a285e47e2d347734853b5e49ae9ead0\n"})}),"\n",(0,t.jsx)(n.p,{children:"Bump fee\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /bumpfee\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Makes all your unconfirmed transactions use a higher fee rate, using CPFP. Returns the ID of the child transaction.\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"feerateSatByte fee rate, in satoshi per vbyte."}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/bumpfee \\\n  -u :<phoenixd_api_password> \\\n  -d feerateSatByte=11\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"758b3df67c62c9cd9ebbde1ff6eaadc1c51f94d5b1a3efb2548236b9a6f1c659\n"})}),"\n",(0,t.jsx)(n.p,{children:"List incoming payments\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"GET /payments/incoming\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Lists incoming payments.\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"from: start timestamp in millis from epoch, default 0\nto: end timestamp in millis from epoch, default now\nlimit: number of payments in the page, default 20\noffset: page offset, default 0\nall: also return unpaid invoices\nexternalId: only include payments that use this external id."}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl 'http://localhost:9740/payments/incoming?all=true&limit=3&offset=2' \\\n\t-u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "type": "incoming_payment",\n    "subType": "lightning",\n    "paymentHash": "b02a9a090c7a5ae7af39f4c8398629fd596d348a452a48d290a8e250bcdd7f31",\n    "preimage": "d4ffb9d35c4f85bc2a11d09d7a35ef5799f19dcacd66740fc6b470c1b7e5ab9f",\n    "externalId": "some_custom_id",\n    "description": "foobar",\n    "invoice": "lntb1u1pnm73qvpp5kq4f5zgv0fdw0tee7nyrnp3fl4vk6dy2g54y355s4r39p0xa0ucscqzyssp5ljhykmd6a4ykvt683scnqd37umgy87x4nel4nc7gnhjahd86dvvq9q7sqqqqqqqqqqqqqqqqqqqsqqqqqysgqdq2vehk7cnpwgmqz9gxqyz5vqrzjqwfn3p9278ttzzpe0e00uhyxhned3j5d9acqak5emwfpflp8z2cnflaaxc6fnra0gcqqqqlgqqqqqeqqjqfrjwg5t3rg3k9mlnrsp0mglghr670hfwcunr5umyhjv4uegas6a3q7y9s3kg3a22ejmkgw9t98j0mhuz93ffkprtjtqx8mn068v3qasqhvlm9k",\n    "isPaid": true,\n    "receivedSat": 100,\n    "fees": 0,\n    "completedAt": 1740588077020,\n    "createdAt": 1740588044198\n  },\n  {\n    "type": "incoming_payment",\n    "subType": "lightning",\n    "paymentHash": "b215bf7745a7d5250be2535b723dd881368c4c4dbd44819cbb0ca7d2d02ee140",\n    "preimage": "2ddcc7fd888f5c524e69c2a6e5ddd89a701b60c73746697568d438aa1cdbdafa",\n    "isPaid": true,\n    "receivedSat": 352,\n    "fees": 0,\n    "payerKey": "02da45cf516282e6959e48c26d6ed5f98bf7c32248193439bd1d22de81ae897426",\n    "completedAt": 1738677427800,\n    "createdAt": 1738677427800\n  },\n  {\n    "type": "incoming_payment",\n    "subType": "lightning",\n    "paymentHash": "9d1f404813f02b86ef177cffd2405f76010fafa98728d0c6ba57ba66f3736f7f",\n    "preimage": "1bd574c090c1214299449a6a0a23a7dc906b310b6e2d2afcabeb2d707205abb9",\n    "isPaid": true,\n    "receivedSat": 100000,\n    "fees": 0,\n    "payerKey": "02da45cf516282e6959e48c26d6ed5f98bf7c32248193439bd1d22de81ae897426",\n    "completedAt": 1738676523881,\n    "createdAt": 1738676523881\n  }\n]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Get incoming payment\nEndpoint"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"GET /payments/incoming/{paymentHash}"}),"\nCode Example"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl http://localhost:9740/payments/incoming/b02a9a090c7a5ae7af39f4c8398629fd596d348a452a48d290a8e250bcdd7f31 \\\n\t-u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "type": "incoming_payment",\n  "subType": "lightning",\n  "paymentHash": "b02a9a090c7a5ae7af39f4c8398629fd596d348a452a48d290a8e250bcdd7f31",\n  "preimage": "d4ffb9d35c4f85bc2a11d09d7a35ef5799f19dcacd66740fc6b470c1b7e5ab9f",\n  "externalId": "some_custom_id",\n  "description": "foobar",\n  "invoice": "lntb1u1pnm73qvpp5kq4f5zgv0fdw0tee7nyrnp3fl4vk6dy2g54y355s4r39p0xa0ucscqzyssp5ljhykmd6a4ykvt683scnqd37umgy87x4nel4nc7gnhjahd86dvvq9q7sqqqqqqqqqqqqqqqqqqqsqqqqqysgqdq2vehk7cnpwgmqz9gxqyz5vqrzjqwfn3p9278ttzzpe0e00uhyxhned3j5d9acqak5emwfpflp8z2cnflaaxc6fnra0gcqqqqlgqqqqqeqqjqfrjwg5t3rg3k9mlnrsp0mglghr670hfwcunr5umyhjv4uegas6a3q7y9s3kg3a22ejmkgw9t98j0mhuz93ffkprtjtqx8mn068v3qasqhvlm9k",\n  "isPaid": true,\n  "receivedSat": 100,\n  "fees": 0,\n  "completedAt": 1740588077020,\n  "createdAt": 1740588044198\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"List outgoing payments\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"GET /payments/outgoing\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Lists outgoing payments.\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"from: start timestamp in millis from epoch, default 0\nto: end timestamp in millis from epoch, default now\nlimit: number of payments in the page, default 20\noffset: page offset, default 0\nall: also return payments that have failed"}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl 'http://localhost:9740/payments/outgoing?all=true&limit=3&offset=2' \\\n\t-u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'[\n  {\n    "type": "outgoing_payment",\n    "subType": "auto_liquidity",\n    "paymentId": "7ad2ac96-1ff9-47ae-9013-b02203c55b93",\n    "txId": "53d85c7e1c5c667f5358666bafd0bce78295d6a87946f984133c9d8efe0b357d",\n    "isPaid": true,\n    "sent": 26850,\n    "fees": 26850000,\n    "completedAt": 1728565522629,\n    "createdAt": 1728565522382\n  },\n  {\n    "type": "outgoing_payment",\n    "subType": "lightning",\n    "paymentId": "9c020753-795c-40a9-b30e-b898b2ba80f5",\n    "paymentHash": "8125523666c317232342a6c01cc1f22a00affa958428eb9b8d7dc174fd4c2ddf",\n    "preimage": "0d9074340788444faca4a64d587febaac8bfb4cb811aabdf7ad2a2671647e425",\n    "isPaid": true,\n    "sent": 5,\n    "fees": 4004,\n    "completedAt": 1738348590680,\n    "createdAt": 1738348589678\n  },\n  {\n    "type": "outgoing_payment",\n    "subType": "lightning",\n    "paymentId": "dddfb160-f5dc-4930-b0d9-bc7a2ebf7b21",\n    "paymentHash": "9727389e1c776f4efb315c4effae02affcb723883d13433ea74cc9e3f2034a93",\n    "preimage": "e21f2f734d298a28fb77474ba11510c425566203daa0f9820706d6bfa75e4faa",\n    "isPaid": true,\n    "sent": 8,\n    "fees": 4016,\n    "invoice": "lntb1pne6xpnpp5junn38suwah5a7e3t380ltsz4l7twgug85f5x048fny78usrf2fscqzyssp5d4wueagg7fjetanym9gl0hpu244nclvxv72nmzlj0z2q4lpewsws9q7sqqqqqqqqqqqqqqqqqqqsqqqqqysgqdqqmqz9gxqyjw5qrzjqwfn3p9278ttzzpe0e00uhyxhned3j5d9acqak5emwfpflp8z2cnflcrt90lceflpuqqqqlgqqqqqeqqjq3nk0es2ahydaf9uz32kryn0wsgek0dmzfddy7nr7f007pn5nzdv83jnf3s7u7cvfxq6j4zd3khz86vzam7gfdq38f8earlc6u7fz5wcppg66jj",\n    "completedAt": 1738348627503,\n    "createdAt": 1738348626053\n  }\n]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Get outgoing payment\nEndpoint"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"GET /payments/outgoing/{paymentId}"}),"\n",(0,t.jsx)(n.code,{children:"GET /payments/outgoingbyhash/{paymentHash}"}),"\nCode example"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"# by uuid\n$ curl http://localhost:9740/payments/outgoing/dddfb160-f5dc-4930-b0d9-bc7a2ebf7b21 \\\n\t-u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"# by payment hash\n$ curl http://localhost:9740/payments/outgoingbyhash/9727389e1c776f4efb315c4effae02affcb723883d13433ea74cc9e3f2034a93 \\\n\t-u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "type": "outgoing_payment",\n  "subType": "lightning",\n  "paymentId": "dddfb160-f5dc-4930-b0d9-bc7a2ebf7b21",\n  "paymentHash": "9727389e1c776f4efb315c4effae02affcb723883d13433ea74cc9e3f2034a93",\n  "preimage": "e21f2f734d298a28fb77474ba11510c425566203daa0f9820706d6bfa75e4faa",\n  "isPaid": true,\n  "sent": 8,\n  "fees": 4016,\n  "invoice": "lntb1pne6xpnpp5junn38suwah5a7e3t380ltsz4l7twgug85f5x048fny78usrf2fscqzyssp5d4wueagg7fjetanym9gl0hpu244nclvxv72nmzlj0z2q4lpewsws9q7sqqqqqqqqqqqqqqqqqqqsqqqqqysgqdqqmqz9gxqyjw5qrzjqwfn3p9278ttzzpe0e00uhyxhned3j5d9acqak5emwfpflp8z2cnflcrt90lceflpuqqqqlgqqqqqeqqjq3nk0es2ahydaf9uz32kryn0wsgek0dmzfddy7nr7f007pn5nzdv83jnf3s7u7cvfxq6j4zd3khz86vzam7gfdq38f8earlc6u7fz5wcppg66jj",\n  "completedAt": 1738348627503,\n  "createdAt": 1738348626053\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"CSV export\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /export\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Exports your successful payments history in a CSV file. Returns the path of the generated file on your file system."}),"\n",(0,t.jsx)(n.p,{children:"The resulting CSV allows precise tracking of the balance and fee credit, and shows the split between mining and service fees:"}),"\n",(0,t.jsx)(n.p,{children:"balance: sum of all amount_msat;\nfee credit: sum of all fee_credit_msat."}),"\n",(0,t.jsx)(n.p,{children:"Parameters"}),"\n",(0,t.jsx)(n.p,{children:"from: start timestamp in millis from epoch, default 0\nto: end timestamp in millis from epoch, default now"}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl http://localhost:9740/export \\\n\t-u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"payment history has been exported to /Users/foobar/.phoenix/exports/export-1729249806.csv\n"})}),"\n",(0,t.jsx)(n.p,{children:"Payments websocket\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"WS /websocket\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Streams JSON of received payments."}),"\n",(0,t.jsx)(n.p,{children:'The JSON payload will contain a type field (for now, only "payment_received") and other technical data. It can contain an externalId if one was provided when the invoice was created, or the payerKey/payerNote for offers.\nAuthentication'}),"\n",(0,t.jsx)(n.p,{children:"Authentication can be done either with basic auth or with the Sec-WebSocket-Protocol header.\nWebsocket example"}),"\n",(0,t.jsx)(n.p,{children:"Using websocat, a command line utility for websocket:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ websocat --basic-auth :<phoenixd_api_password> ws://127.0.0.1:9740/websocket\n{ "type": "payment_received", "amountSat": 15, "payerNote": "hello \ud83d\udc4b", "payerKey": "02ad95a81c1865ddb41a49f07b11a70b3f8fcd68ae161e0eb561a074f6a223ff84", "paymentHash": "5ad2185b67c6ba2e65987ab22abf5b4f8c25049d1a3b5dda76f050bc7726aab3" }\n{ "type": "payment_received", "amountSat": 30, "payerKey": "02ad95a81c1865ddb41a49f07b11a70b3f8fcd68ae161e0eb561a074f6a223ff84", "paymentHash": "604def4dd6846ea6373ba27353b229ddb31ca1cb206d4becf95f82a0df4b8cfc" }\n'})}),"\n",(0,t.jsx)(n.p,{children:"Webhook"}),"\n",(0,t.jsx)(n.p,{children:"When a payment is received, phoenixd will execute an HTTP POST request to endpoints of your choice, if any are configured in the phoenix.conf settings. Use this webhook mechanism to notify an external system that a payment was successfully received."}),"\n",(0,t.jsx)(n.p,{children:"Notes:"}),"\n",(0,t.jsx)(n.p,{children:"The webhook endpoint should be https, but this is not enforced by Phoenixd."}),"\n",(0,t.jsx)(n.p,{children:"To notify a specific webhook for a specific payment, use the webhookUrl parameter instead when creating the invoice."}),"\n",(0,t.jsx)(n.p,{children:"The JSON payload is similar to the websocket events."}),"\n",(0,t.jsx)(n.p,{children:"Configuration example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"# in ~/.phoenix/phoenix.conf\nwebhook=https://webhook.site/aaaaaaaa-bbbb-xxxx-yyyy-zzzz\n# you may have multiple webhooks, they will all be notified\nwebhook=https://anotherwebhook.com\n"})}),"\n",(0,t.jsx)(n.p,{children:"Webhook example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:'$ curl -X POST https://webhook.site/aaaaaaaa-bbbb-xxxx-yyyy-zzzz \\\n    --header \'accept: application/json\' \\\n    --header \'accept-charset: UTF-8\' \\\n    --header \'content-type: application/json\' \\\n    --header \'host: webhook.site\' \\\n    --data $\'{\n        "type": "payment_received",\n        "amountSat": 100,\n        "paymentHash": "ae4ad6c862986ca50e5ce9d295f2218396bf192c60be8a85b347eddf57622c15",\n        "externalId": "foobar"\n    }\'\n'})}),"\n",(0,t.jsx)(n.p,{children:"Get node info\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"GET /getinfo\nCode example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl http://localhost:9740/getinfo \\\n    -u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "nodeId": "023a882b070d0b9b1c8db2975f2dcc65d1ffa22e00085506ab24799d6d95d658a2",\n  "channels": [\n    // a compact list of your channels\n    {\n      "state": "Normal",\n      "channelId": "853c38dae30b4252cddcf3c87fc69f63313813cc5a0d06921d8a8d1f4c5f0692",\n      "balanceSat": 10,\n      "inboundLiquiditySat": 1013562,\n      "capacitySat": 1015160,\n      "fundingTxId": "3ed12fe931d1bc32ba94de8311f21016443ff6af338ac4e58b1b9ce2bd07dbf6"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Get balance\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"GET /getbalance\nCode example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl http://localhost:9740/getbalance \\\n    -u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "balanceSat": 104228,\n  "feeCreditSat": 391\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"List channels\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"GET /listchannels\nCode example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl http://localhost:9740/listchannels \\\n    -u :<phoenixd_api_password>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'[\n    {\n        "type": "fr.acinq.lightning.channel.states.Normal",\n        "commitments": {\n            "params": {\n                "channelId": "caeda5a5ad278221c0ec995d667a607b7f7e006f7c092872783acf2015fa6455",\n                "channelConfig": [\n                    "funding_pubkey_based_channel_keypath"\n                ],\n                "channelFeatures": [\n                    "option_static_remotekey",\n                    "option_anchor_outputs",\n                    "zero_reserve_channels",\n                    "option_dual_fund"\n                ],\n                "localParams": {\n                    "nodeId": "022c03770b43158d67321a34de5e3e5a4a662adeafbe0270674704eeef56e39770",\n                    "fundingKeyPath": "m/2147483553\'/2147483543\'/2143050548\'/2147483562\'/2147462237\'/2147483597\'/2147478557\'/2147483611\'/0\'",\n                    "dustLimit": 546,\n                    "maxHtlcValueInFlightMsat": 20000000000,\n                    "htlcMinimum": 1000,\n                    "toSelfDelay": 2016,\n                    "maxAcceptedHtlcs": 6,\n                    "isInitiator": false,\n                    ...\n                },\n                "remoteParams": {\n                    "nodeId": "03933884aaf1d6b108397e5efe5c86bcf2d8ca8d2f700eda99db9214fc2712b134",\n                    "dustLimit": 546,\n                    "maxHtlcValueInFlightMsat": 2100000000000000000,\n                    "htlcMinimum": 1,\n                    ...\n                },\n                "channelFlags": 0\n            },\n\n        },\n        "shortChannelId": "0x7410060x0",\n        "channelUpdate": {\n            "signature": "76164e3c3325521936461a40d12a2b7d998b97acb41fb80a59d4751bac4a0cd671f3b704559fef4a182729b98db0b57402e56f8f439cc7bc20096d05392af947",\n            "chainHash": "43497fd7f826957108f4a30fd9cec3aeba79972084e90ead01ea330900000000",\n            "shortChannelId": "0x7410060x0",\n            "timestampSeconds": 1709829101,\n            "messageFlags": 1,\n            "channelFlags": 0,\n            "cltvExpiryDelta": 144,\n            "htlcMinimumMsat": 1,\n            "feeBaseMsat": 1000,\n            "feeProportionalMillionths": 100,\n            "htlcMaximumMsat": 1252708000\n        },\n        ...\n    }\n]\n'})}),"\n",(0,t.jsx)(n.p,{children:"Close channel\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /closechannel\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Closes a given channel, and send all funds to an on-chain address. Returns the ID of the closing transaction."}),"\n",(0,t.jsx)(n.p,{children:"Attention: closing a channel is final, it cannot be cancelled.\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"channelId identifier of the channel to close\naddress bitcoin address where your balance will be sent to\nfeerateSatByte fee rate in satoshi per vbyte"}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/closechannel \\\n -u :<phoenixd_api_password> \\\n -d channelId=1943e03b85c06c60678ecc0fefcae8317f0a1429838aaeed1c9df4e548d7c29c \\\n -d feerateSatByte=10 \\\n -d address=tb1qrhv88h2rf7wscut7st3ha5uspx2njjr7xdzn5t\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"758b3df67c62c9cd9ebbde1ff6eaadc1c51f94d5b1a3efb2548236b9a6f1c659\n"})}),"\n",(0,t.jsx)(n.p,{children:"Decode invoice\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /decodeinvoice\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"invoice a Bolt11 invoice"}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/decodeinvoice \\\n -u :<phoenixd_api_password> \\\n -d invoice=lntb10n1pngtqfhpp5qezkef9tussdxurernxpmur9fzm2g0gqjuffaypvd2r7ma8urh4scqpjsp5u3dgmgrry4advuse35al6d2j2ns9uewequpuwcf8eun0pk7m5lms9q7sqqqqqqqqqqqqqqqqqqqsqqqqqysgqdq4xysyymr0vd4kzcmrd9hx7mqz9grzjqwfn3p9278ttzzpe0e00uhyxhned3j5d9acqak5emwfpflp8z2cnfl6h8msfh3505gqqqqlgqqqqqeqqjq3krntmn2r4d8j0ncgztxkssymfpwy3lv48jt5zgq5te8c5h56r6r03a2nz09nye89pmyhncm64ppwcufntar2zs5m4jw2cfm8u9m3usqxju37k\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "chain": "testnet",\n    "amount": 1000,\n    "paymentHash": "06456ca4abe420d370791ccc1df06548b6a43d0097129e902c6a87edf4fc1deb",\n    "description": "1 Blockaccino",\n    "minFinalCltvExpiryDelta": 18,\n    "paymentSecret": "e45a8da063257ad672198d3bfd355254e05e65d90703c76127cf26f0dbdba7f7",\n    "paymentMetadata": "2a",\n    "extraHops": [\n        [\n            {\n                "nodeId": "03933884aaf1d6b108397e5efe5c86bcf2d8ca8d2f700eda99db9214fc2712b134",\n                "shortChannelId": "16734014x14719942x36770",\n                "feeBase": 1000,\n                "feeProportionalMillionths": 100,\n                "cltvExpiryDelta": 144\n            }\n        ]\n    ],\n    "features": {\n        "activated": {\n            "var_onion_optin": "Mandatory",\n            "payment_secret": "Mandatory",\n            "basic_mpp": "Optional",\n            "option_payment_metadata": "Optional",\n            "trampoline_payment_experimental": "Optional"\n        },\n        "unknown": []\n    },\n    "timestampSeconds": 1720025399\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Decode offer\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /decodeoffer\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"offer a Bolt12 offer"}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ curl -X POST http://localhost:9740/decodeoffer \\\n -u :<phoenixd_api_password> \\\n -d offer=lno1qgsyxjtl6luzd9t3pr62xr...9ry9zqagt0ktn4wwvqg52v9ss9ls22sqyqqestzp2l6decpn87pq96udsvx\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "chain": "testnet",\n    "amount": 1000,\n    "paymentHash": "06456ca4abe420d370791ccc1df06548b6a43d0097129e902c6a87edf4fc1deb",\n    "description": "1 Blockaccino",\n    "minFinalCltvExpiryDelta": 18,\n    "paymentSecret": "e45a8da063257ad672198d3bfd355254e05e65d90703c76127cf26f0dbdba7f7",\n    "paymentMetadata": "2a",\n    "extraHops": [\n        [\n            {\n                "nodeId": "03933884aaf1d6b108397e5efe5c86bcf2d8ca8d2f700eda99db9214fc2712b134",\n                "shortChannelId": "16734014x14719942x36770",\n                "feeBase": 1000,\n                "feeProportionalMillionths": 100,\n                "cltvExpiryDelta": 144\n            }\n        ]\n    ],\n    "features": {\n        "activated": {\n            "var_onion_optin": "Mandatory",\n            "payment_secret": "Mandatory",\n            "basic_mpp": "Optional",\n            "option_payment_metadata": "Optional",\n            "trampoline_payment_experimental": "Optional"\n        },\n        "unknown": []\n    },\n    "timestampSeconds": 1720025399\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Estimate liquidity fees\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /estimateliquidityfees\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Estimates a liquidity fee for a given amount. Note that it depends on the current mining feerate, which is volatile. The estimate returned is the full cost and does not take into account any fee credit you may have.\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"amountSat the liquidiy amount, in satoshi."}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"$ curl -X POST http://localhost:9740/estimateliquidityfees \\\n -u :<phoenixd_api_password> \\\n -d amountSat=2000000\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n"miningFeeSat": 1219,\n"serviceFeeSat": 20000\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"LNURL Pay\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Pays a LNURL-pay resource. Note that the service may apply restrictions on the amount to pay or the message -- the lnurl-pay flow is usually interactive.\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /lnurlpay\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"amountSat the amount to pay\nlnurl the lnurl-pay resource\nmessage a comment for the recipient"}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/lnurlpay \\\n -u :<phoenixd_api_password> \\\n -d lnurl=LNURL1DP68GURN8GHJ7MRWW4EXCTNXD9SHG6NPVCHXXMMD9AKXUATJDSKHQCTE8AEK2UMND9HKU0TZV9JR2VM9XV6RVV3JVSUNWDRYXUCNVDFHV43KVE3KXQCRJDFHX33XGDENX9NRSVTRXCENVC3KV33NGWR9XQURWC3N8YEN2WP4V4JNZV8XSUH \\\n -d amountSat=100\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'    {\n    "recipientAmountSat": 100,\n    "routingFeeSat": 4,\n    "paymentId": "2ff3c4f2-1d97-4dc0-a522-371591c058dc",\n    "paymentHash": "6a0084471b2020373a89a81b5f7e34135154f24208e491d0122d99a686b1d58d",\n    "paymentPreimage": "5746edcdbf872fc508939f31f18998f294d579668f334a023804b992b0fe4842"\n    }\n'})}),"\n",(0,t.jsx)(n.p,{children:"LNURL Withdraw\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Withdraws funds from a LNURL service. Phoenixd will withdraw the maximum amount authorized by the service.\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /lnurlwithdraw\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"lnurl the lnurl-withdraw resource"}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/lnurlpay \\\n -u :<phoenixd_api_password> \\\n -d lnurl=lightning:LNURL1DP68GURN8GHJ7MRWW4EXCTNXD9SHG6NPVCHXXMMD9AKXUATJDSKHW6T5DPJ8YCTH8AEK2UMND9HKU0T9893XYVF5XQMX2EP4VYCNJWR9X56RSCEE893NYVP3VC6KGEPNX5UNGDFCV9NRJDNXXCMNXENZXPJXVCFS89NRWVFJXYCNXD3K89JNGAXMZVT\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n    "url": "https://lnurl.fiatjaf.com/lnurl-withdraw?session=e9bb1406ed5a198e548c99c201f5dd359458af96f673fb0dfa09f712113669e4",\n    "minWithdrawable": 1000,\n    "maxWithdrawable": 4000,\n    "description": "sample withdraw",\n    "k1": "1649e2443dd004421e05e08a17e52ee1454e9f74aacedacc822777b9ff4ffbfb",\n    "invoice": "lnbc40n1pnfqpstpp5npnnapuxylxelsat27q4dncgj...2f0tvfw33kspxfenxx"\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"LNURL Auth\nDescription"}),"\n",(0,t.jsx)(n.p,{children:"Authenticates a LNURL-auth resource to allow an action on a remote service. See LUD-04 for details."}),"\n",(0,t.jsx)(n.p,{children:"Note: The key used to sign is derived from the wallet's key (derivation depends on the lnurl service's domain). If you have different users using the same phoenixd instance, do not let them use this or they will share the same signature and pubkey!\nEndpoint"}),"\n",(0,t.jsx)(n.p,{children:"POST /lnurlauth\nParameters"}),"\n",(0,t.jsx)(n.p,{children:"lnurl the lnurl-auth resource"}),"\n",(0,t.jsx)(n.p,{children:"Code example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"$ curl -X POST http://localhost:9740/lnurlauth \\\n -u :<phoenixd_api_password> \\\n -d lnurl=lnurl1dp68gurn8ghj7um5v93kketj9ehx2amn9ashq6f0d3hxzat5dqlhgct884kx7emfdcnxkvfav3nxxcehxyckvdrpxsexyden8qexywrpv33nvdmpxsukzdpnvgungct9xesnvcf3x9jnsenxvvurvcmzvd3rwdfevgmnwdpjxp3nqvg50j329\n"})}),"\n",(0,t.jsx)(n.p,{children:"Response"}),"\n",(0,t.jsx)(n.p,{children:"authentication success"})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>c,x:()=>i});var s=a(6540);const t={},d=s.createContext(t);function c(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);